<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="600px" preserveAspectRatio="none" style="width:1018px;height:600px;background:#FFFFFF;" version="1.1" viewBox="0 0 1018 600" width="1018px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="472.4375" style="stroke:#181818;stroke-width:1.0;" width="10" x="83" y="65.2188"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="224.5" y="87.5703"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="331.5" y="148.2734"/><rect fill="#FFFFFF" height="319.6797" style="stroke:#181818;stroke-width:1.0;" width="10" x="426" y="208.9766"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="689" y="324.8984"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="932" y="454.3047"/><rect fill="none" height="215.1094" style="stroke:#000000;stroke-width:1.5;" width="637" x="375" y="284.1953"/><rect fill="none" height="122.0547" style="stroke:#000000;stroke-width:1.5;" width="617" x="385" y="370.25"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="88" x2="88" y1="55.2188" y2="546.6563"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="229" x2="229" y1="55.2188" y2="546.6563"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="336" x2="336" y1="55.2188" y2="546.6563"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="431" x2="431" y1="55.2188" y2="546.6563"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="694" x2="694" y1="55.2188" y2="546.6563"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="823" x2="823" y1="55.2188" y2="546.6563"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="937" x2="937" y1="257.0859" y2="546.6563"/><rect fill="#E3E3E3" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="166" x="5" y="22.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="152" x="12" y="44.1426">:OfferDecisionController</text><rect fill="#E3E3E3" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="166" x="5" y="545.6563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="152" x="12" y="567.1895">:OfferDecisionController</text><rect fill="#E3E3E3" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="97" x="181" y="22.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="188" y="44.1426">:Repositories</text><rect fill="#E3E3E3" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="97" x="181" y="545.6563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="188" y="567.1895">:Repositories</text><rect fill="#E3E3E3" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="97" x="288" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74" x="299.5" y="26.5332">repositories</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="295" y="44.1426">:Repositories</text><rect fill="#E3E3E3" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="97" x="288" y="545.6563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74" x="299.5" y="567.1895">repositories</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="295" y="584.7988">:Repositories</text><rect fill="#E3E3E3" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="72" x="395" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="404" y="26.5332">Property</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58" x="402" y="44.1426">:Property</text><rect fill="#E3E3E3" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="72" x="395" y="545.6563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="404" y="567.1895">Property</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58" x="402" y="584.7988">:Property</text><rect fill="#E3E3E3" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="140" x="624" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="121" x="633.5" y="26.5332">propertyRepository</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="126" x="631" y="44.1426">:PropertyRepository</text><rect fill="#E3E3E3" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="140" x="624" y="545.6563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="121" x="633.5" y="567.1895">propertyRepository</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="126" x="631" y="584.7988">:PropertyRepository</text><rect fill="#E3E3E3" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="98" x="774" y="22.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="781" y="44.1426">:OfferMapper</text><rect fill="#E3E3E3" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="98" x="774" y="545.6563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="781" y="567.1895">:OfferMapper</text><rect fill="#E3E3E3" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="110" x="882" y="545.6563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="899" y="567.1895">PropertyList</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="889" y="584.7988">:List&lt;Property&gt;</text><rect fill="#FFFFFF" height="472.4375" style="stroke:#181818;stroke-width:1.0;" width="10" x="83" y="65.2188"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="224.5" y="87.5703"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="331.5" y="148.2734"/><rect fill="#FFFFFF" height="319.6797" style="stroke:#181818;stroke-width:1.0;" width="10" x="426" y="208.9766"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="689" y="324.8984"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="932" y="454.3047"/><polygon fill="#181818" points="212.5,83.5703,222.5,87.5703,212.5,91.5703,216.5,87.5703" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="93" x2="218.5" y1="87.5703" y2="87.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="100" y="82.7139">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="111" y="82.7139">getInstance()</text><polygon fill="#181818" points="104,113.9219,94,117.9219,104,121.9219,100,117.9219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="98" x2="228.5" y1="117.9219" y2="117.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="110" y="113.0654">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="121" y="113.0654">repository</text><polygon fill="#181818" points="319.5,144.2734,329.5,148.2734,319.5,152.2734,323.5,148.2734" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="93" x2="325.5" y1="148.2734" y2="148.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="100" y="143.417">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="111" y="143.417">getPropertyRepository()</text><polygon fill="#181818" points="104,174.625,94,178.625,104,182.625,100,178.625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="98" x2="335.5" y1="178.625" y2="178.625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="110" y="173.7686">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111" x="121" y="173.7686">PropertyRepository</text><polygon fill="#181818" points="414,204.9766,424,208.9766,414,212.9766,418,208.9766" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="93" x2="420" y1="208.9766" y2="208.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="100" y="204.1201">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="111" y="204.1201">getPropertiesList()</text><polygon fill="#181818" points="870,235.3281,880,239.3281,870,243.3281,874,239.3281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="436" x2="876" y1="239.3281" y2="239.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="443" y="234.4717">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44" x="454" y="234.4717">create()</text><rect fill="#E3E3E3" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="110" x="882" y="216.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="899" y="238.5098">PropertyList</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="889" y="256.1191">:List&lt;Property&gt;</text><path d="M375,284.1953 L448,284.1953 L448,292.5469 L438,302.5469 L375,302.5469 L375,284.1953 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="215.1094" style="stroke:#000000;stroke-width:1.5;" width="637" x="375" y="284.1953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="390" y="298.6904">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="104" x="463" y="297.6143">[for each property]</text><polygon fill="#181818" points="677,320.8984,687,324.8984,677,328.8984,681,324.8984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="436" x2="683" y1="324.8984" y2="324.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="443" y="320.042">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="454" y="320.042">getProperty(i)</text><polygon fill="#181818" points="447,351.25,437,355.25,447,359.25,443,355.25" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="441" x2="693" y1="355.25" y2="355.25"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="453" y="350.3936">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49" x="464" y="350.3936">Property</text><path d="M385,370.25 L450,370.25 L450,378.6016 L440,388.6016 L385,388.6016 L385,370.25 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="122.0547" style="stroke:#000000;stroke-width:1.5;" width="617" x="385" y="370.25"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="20" x="400" y="384.7451">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="114" x="465" y="383.6689">[if property not sold]</text><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="436" x2="478" y1="410.9531" y2="410.9531"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="478" x2="478" y1="410.9531" y2="423.9531"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="437" x2="478" y1="423.9531" y2="423.9531"/><polygon fill="#181818" points="447,419.9531,437,423.9531,447,427.9531,443,423.9531" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="443" y="406.0967">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="228" x="454" y="406.0967">compare(property1Date, property2Date)</text><polygon fill="#181818" points="920,450.3047,930,454.3047,920,458.3047,924,454.3047" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="436" x2="926" y1="454.3047" y2="454.3047"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="443" y="449.4482">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="461" y="449.4482">add(property)</text><polygon fill="#181818" points="104,524.6563,94,528.6563,104,532.6563,100,528.6563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="98" x2="430" y1="528.6563" y2="528.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="110" y="523.7998">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="128" y="523.7998">PropertyList</text><!--MD5=[ce3b4dd5c8ba72ad5727c3e2354efead]
@startuml
skinparam monochrome true
skinparam packageStyle rectangle
skinparam shadowing false

autonumber
participant ":OfferDecisionController" as controller
participant ":Repositories" as singleton
participant "repositories\n:Repositories" as repositories
participant "Property\n:Property" as property
participant "propertyRepository\n:PropertyRepository" as propertyrepository
participant ":OfferMapper" as mapper
participant "PropertyList\n:List<Property>" as propertylist

activate controller

        controller -> singleton : getInstance()
        activate singleton

                singleton - -> controller : repository

            deactivate singleton

            controller -> repositories : getPropertyRepository()

            activate repositories

                repositories - -> controller : PropertyRepository

            deactivate repositories

                controller -> property : getPropertiesList()
                activate property

                create propertylist
                property - -> propertylist** : create()

                    loop for each property
                    
                        property -> propertyrepository : getProperty(i)
                        activate propertyrepository
                        propertyrepository - -> property : Property
                        deactivate propertyrepository

                        opt if property not sold

                                property - -> property : compare(property1Date, property2Date)

                                property -> propertylist : add(property)
                                activate propertylist
                                deactivate propertylist

                        end
 
                    end

                property - -> controller : PropertyList

                deactivate property
        
@enduml

PlantUML version 1.2022.7(Mon Aug 22 18:01:30 WEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>